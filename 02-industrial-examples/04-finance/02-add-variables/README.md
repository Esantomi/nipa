# 파생변수 생성
주가 예측을 수행할 때 데이터에 존재하는 기존 변수 이외에 새로운 변수들이 추가될수록 예측 성능을 높일 수 있습니다.

이번 실습에서는 주식 데이터에 들어있는 기본 데이터들을 가공하여 **이동평균, 거래량 이동평균, 이격도 등을 계산하여 데이터프레임에 추가**해 보도록 하겠습니다.

### 지시 사항
1. 아래 코드를 사용하여 `이동평균값(MA)`, `거래량 이동평균값(VMA)`, `이격도값(disp)` 변수를 추가해 보세요.
    - `ma.data_preprocess()`
2. `실행` 버튼을 눌러 결과를 확인해 보세요.
3. `제출` 버튼을 눌러 새로운 파생 변수들이 올바르게 추가되었는지 확인해 보세요.

### Tips
- 종가 : 해당 날짜의 마감 주가
- 이동평균 : 해당 날짜 이전 N일 간의 평균치
- 이격도 : 주가와 이동평균 간의 차이 비율

## 답안
```
import machine as ma

def main():
    
    """
    지시사항 1번. 이동평균값(MA), 거래량 이동평균값(VMA), 이격도값(disp) 변수를 추가해 보세요.
    """
    ma.data_preprocess()

if __name__ == "__main__":
    main()
```

### 실행 결과
```
이동평균 및 이격도가 추가된 주가 데이터
           Date   High    Low  ...          MA60        VMA5       Disp5
0    2020-03-02  55500  53600  ...           NaN         NaN         NaN
1    2020-03-03  56900  55100  ...           NaN         NaN         NaN
2    2020-03-04  57600  54600  ...           NaN         NaN         NaN
3    2020-03-05  58000  56700  ...           NaN         NaN         NaN
4    2020-03-06  57200  56200  ...           NaN  25183016.2  100.141794
5    2020-03-09  56500  56500  ...           NaN  19102333.8   99.612130
6    2020-03-10  54900  53700  ...           NaN  19457585.6   96.534653
7    2020-03-11  54400  52000  ...           NaN  23645896.2   93.873874
8    2020-03-12  52100  52100  ...           NaN  19306098.2   95.842531
9    2020-03-13  51600  46850  ...           NaN  27455353.6   94.156456
10   2020-03-16  50900  48800  ...           NaN  34123317.8   94.896177
11   2020-03-17  49650  46700  ...           NaN  37945637.2   94.467745
12   2020-03-18  48350  45600  ...           NaN  36834705.6   93.500103
13   2020-03-19  46650  42300  ...           NaN  48219808.2   91.499787
14   2020-03-20  45500  43550  ...           NaN  46273223.2   98.631327
15   2020-03-23  43550  42400  ...           NaN  47945584.2   94.972067
16   2020-03-24  46950  43050  ...           NaN  47662335.6  105.080573
17   2020-03-25  49600  47150  ...           NaN  50178995.4  107.418856
18   2020-03-26  49300  47700  ...           NaN  47230918.6  103.329010
19   2020-03-27  49700  46850  ...           NaN  45264152.6  103.116994
20   2020-03-30  48350  46550  ...           NaN  42283306.4   99.874765
21   2020-03-31  48500  47150  ...           NaN  38453777.0   99.334304
22   2020-04-01  47900  45800  ...           NaN  33358499.0   96.421053
23   2020-04-02  46850  45350  ...           NaN  29245688.4   98.942918
24   2020-04-03  47600  46550  ...           NaN  25823389.2   99.914966
25   2020-04-06  48800  47250  ...           NaN  25143055.4  103.156111
26   2020-04-07  50200  49000  ...           NaN  25317010.0  104.245481
27   2020-04-08  49750  48600  ...           NaN  24867166.4  100.955546
28   2020-04-09  49800  48700  ...           NaN  25068562.8  101.028807
29   2020-04-10  49250  48650  ...           NaN  24079448.6  100.407747
..          ...    ...    ...  ...           ...         ...         ...
75   2020-06-19  52900  51600  ...  50001.666667  22278960.4  101.966076
76   2020-06-22  52600  51800  ...  50085.833333  19284646.2   99.426386
77   2020-06-23  52800  51100  ...  50131.666667  18540201.6   98.542945
78   2020-06-24  53900  51600  ...  50216.666667  18109593.0  101.147228
79   2020-06-25  53000  51900  ...  50276.666667  18621332.6   99.387208
80   2020-06-26  53900  52200  ...  50367.500000  19304807.6  101.912046
81   2020-06-29  53200  52000  ...  50445.000000  20099922.6  100.038183
82   2020-06-30  53900  52800  ...  50561.666667  20714126.6  100.265856
83   2020-07-01  53600  52400  ...  50658.333333  19151444.8  100.000000
84   2020-07-02  52900  52100  ...  50756.666667  18271636.6  100.189394
85   2020-07-03  53600  52700  ...  50838.333333  16334138.2  101.399924
86   2020-07-06  55000  53800  ...  50928.333333  16750077.8  103.034845
87   2020-07-07  55900  53400  ...  51008.333333  18670649.8   99.813084
88   2020-07-08  53900  52900  ...  51073.333333  19262351.6   98.917507
89   2020-07-09  53600  52800  ...  51132.500000  19844805.0   98.581031
90   2020-07-10  53200  52300  ...  51205.833333  20210180.6   98.726115
91   2020-07-13  53800  53100  ...  51279.166667  18686893.6  100.640784
92   2020-07-14  53800  53200  ...  51359.166667  15388784.0  101.242002
93   2020-07-15  55000  54300  ...  51414.166667  16266143.6  102.281227
94   2020-07-16  54800  53800  ...  51475.833333  16210999.0  100.223547
95   2020-07-17  54700  54100  ...  51561.666667  15487284.6  100.703443
96   2020-07-20  54800  54000  ...  51634.166667  15140753.0  100.036914
97   2020-07-21  55400  54800  ...  51725.000000  15946308.2  101.505140
98   2020-07-22  55500  54700  ...  51814.166667  13713029.6  100.403818
99   2020-07-23  54700  53800  ...  51885.000000  13600190.6   99.193253
100  2020-07-24  54400  53700  ...  51953.333333  13779862.8   99.449541
101  2020-07-27  55700  54300  ...  52046.666667  15889241.0  101.496897
102  2020-07-28  58800  56400  ...  52215.000000  21916102.2  105.699856
103  2020-07-29  60400  58600  ...  52378.333333  26634413.0  104.795737
104  2020-07-30  60100  59000  ...  52548.333333  27248497.4  103.002793

[105 rows x 12 columns]
```
```
이동평균선 그래프
```
![image](https://user-images.githubusercontent.com/61646760/145758475-64434c54-fedb-4ef9-b9f6-4e43c8d25ce5.png)
```
거래량 이동평균값 그래프
```
![image](https://user-images.githubusercontent.com/61646760/145758507-2b6eef42-e9b1-498b-b89a-2a42f82128da.png)
